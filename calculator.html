<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }

      .container {
        width: 600px;
        height: 560px;
        margin: 0 auto;
      }

      .outer-box {
        width: 400px;
        height: 480px;
        background-color: white;
        border: 2px solid red;
        margin-left: 100px;
      }

      .display {
        width: 350px;
        height: 70px;
        margin: 10px auto;
        border-radius: 4px;
        border: 2px solid red;
      }

      .input {
        width: 330px;
        height: 50px;
        color: black;
        font-size: 25px;
        text-align: end;
        padding: 10px;
      }

      .inner-boxes {
        width: 340px;
        height: 315px;
        border: 1px solid red;
        margin: 5px auto;
      }

      .box {
        width: 55px;
        height: 50px;
        margin: 5px 2px 5px 6px;
        font-size: 20px;
      }

      .clear {
        margin-left: 305px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="outer-box">
        <div class="display">
          <div class="input"></div>
        </div>
        <button class="clear box" onclick="clearDisplay()">C</button>
        <div class="inner-boxes">
          <button class="box">sin</button>
          <button class="box">cos</button>
          <button class="box">tan</button>
          <button class="box" onclick="choosefactop('sqr')">sqrt</button>
          <button class="box">exp</button>
          <button class="box" onclick="appendNumber('7')">7</button>
          <button class="box" onclick="appendNumber('8')">8</button>
          <button class="box" onclick="appendNumber('9')">9</button>
          <button class="box" onclick="chooseOperation('+')">+</button>
          <button class="box" onclick="choosefactop('!')">x!</button>
          <button class="box" onclick="appendNumber('4')">4</button>
          <button class="box" onclick="appendNumber('5')">5</button>
          <button class="box" onclick="appendNumber('6')">6</button>
          <button class="box" onclick="chooseOperation('*')">*</button>
          <button class="box" onclick="pivalue('pi')">pi</button>
          <button class="box" onclick="appendNumber('1')">1</button>
          <button class="box" onclick="appendNumber('2')">2</button>
          <button class="box" onclick="appendNumber('3')">3</button>
          <button class="box" onclick="chooseOperation('-')">-</button>
          <button class="box">()</button>
          <button class="box" onclick="appendNumber('0')">0</button>
          <button class="box" onclick="chooseOperation('/')">/</button>
          <button class="box" onclick="chooseOperation('%')">%</button>
          <button class="box" onclick="compute()">=</button>
          <button class="box" onclick="append('.')">.</button>
        </div>
      </div>
    </div>

    <script>
      let displayResult = document.querySelector(".input");
      const boxes = document.querySelectorAll(".box");
      let currentNumber;
      let prevNumber = "";
      let operation = undefined;
      let result;
      let factorial;
      let sqrt;

      function appendNumber(number) {
        currentNumber = "";
        currentNumber += number;
        updateDisplay();
      }

      function pivalue() {
        currentNumber = "3.14";
        updateDisplay();
      }

      //==> To pass the operator when chosen
      function chooseOperation(op) {
        if (currentNumber === "") {
          return;
        } else {
          operation = op;
          prevNumber = currentNumber;
          currentNumber = "";
        }
        updateDisplay();
      }

      //==> To pass the factorial opertaor when chosen
      function choosefactop(op) {
        if (currentNumber === "") {
          return;
        } else {
          operation = op;
          prevNumber = currentNumber;
          currentNumber = op;
        }
        updateDisplay();
      }

      function operationsqrt(op) {
        let number = prevNumber;
        if (prevNumber === "") {
          return;
        }
        if (number < 0) {
          return "Square root of negative numbers is not real";
        } else {
          operation = op;
          sqrt = Math.sqrt(number);
        }
        return sqrt;
      }

      //==> To calculate factorial
      function chooseOperationfact(op) {
        if (prevNumber === "") {
          console.log("returned");
          return;
        } else {
          operation = op;
          let number = prevNumber;
          let fact = 1;
          for (let i = 1; i <= number; i++) {
            fact = fact * i;
          }
          factorial = fact;
        }
        return factorial;
      }

      //==> To calculate by clicking on assignment operator
      function compute() {
        const prev = parseFloat(prevNumber);
        const current = parseFloat(currentNumber);
        //  if (prev === '' || current === '') {
        //    return;
        //  }
        if (operation === "!") {
          currentNumber = "";
          result = chooseOperationfact(operation);
        } else if (operation === "sqr") {
          currentNumber = "";
          result = operationsqrt(operation);
        } else {
          switch (operation) {
            case "+":
              result = prev + current;
              break;
            case "-":
              result = prev - current;
              break;
            case "*":
              result = prev * current;
              break;
            case "/":
              result = prev / current;
              break;
            case "%":
              current = 100;
              result = prev / 100;
            default:
              return;
          }
        }
        currentNumber = result;
        operation = undefined;
        prevNumber = "";
        updateDisplay();
      }

      //==> To clear the display
      function clearDisplay() {
        currentNumber = "";
        prevNumber = "";
        operation = undefined;
        updateDisplay();
      }
      //==> To show inputs and outputs on display
      function updateDisplay() {
        displayResult.innerText = currentNumber;
      }
    </script>
  </body>
</html>
